<!DOCTYPE html>
<html lang="pt-br">
<head>
  <meta charset="UTF-8" />
  <title>Painel Staff â€” Sistema Oasis</title>
  <link rel="stylesheet" href="../style.css" />
</head>

<body class="bg-paper">

<!-- ğŸ” PROTEÃ‡ÃƒO REAL -->
<script>
  const usuario = JSON.parse(localStorage.getItem("usuario"));

  // NÃ£o logado
  if (!usuario) {
    location.href = "../index.html";
  }

  // Apenas staff ou coordenaÃ§Ã£o
  if (usuario.nivel !== "staff" && usuario.nivel !== "coordenacao") {
    location.href = "../index.html";
  }
</script>

<header class="header small official">
  <h2>ğŸ‘® Painel Staff â€” Sistema Oasis</h2>
  <span>Atendimento institucional</span>
</header>

<nav class="nav-bar official">
  <button onclick="mostrarAba('tickets')">ğŸ« Tickets</button>

  <!-- âš–ï¸ sÃ³ coordenaÃ§Ã£o vÃª -->
  <button
    id="btnCoord"
    onclick="mostrarAba('coord')"
    style="display:none"
  >
    âš–ï¸ CoordenaÃ§Ã£o
  </button>

  <button onclick="sair()">ğŸšª Sair</button>
</nav>

<main class="content official">

  <!-- ===== TICKETS STAFF ===== -->
  <section id="tickets" class="aba active">
    <h3>ğŸ« Tickets em Atendimento</h3>
    <div id="listaTickets"></div>
  </section>

  <!-- ===== COORDENAÃ‡ÃƒO ===== -->
  <section id="coord" class="aba">
    <h3>âš–ï¸ Painel de CoordenaÃ§Ã£o</h3>
    <p>Ferramentas avanÃ§adas de controle.</p>

    <div id="listaCoord"></div>
  </section>

</main>

<script type="module" src="staff.js"></script>

<script>
  // Mostrar aba coordenaÃ§Ã£o apenas para coord
  if (usuario.nivel === "coordenacao") {
    document.getElementById("btnCoord").style.display = "inline-block";
  }

  function mostrarAba(id) {
    document.querySelectorAll(".aba").forEach(a => a.classList.remove("active"));
    document.getElementById(id).classList.add("active");
  }

  function sair() {
    localStorage.clear();
    location.href = "../index.html";
  }
</script>

</body>
</html>
